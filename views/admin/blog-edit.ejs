<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
  </head>
  <body>
    <%- include('../partials/nav') %>

    <div class="container mt-3">
      <div class="row">
        <div class="col-md-12 mt-3">
          <form action="/admin/blogs/<%= blog.blogId %>" method="POST">
            <input type="hidden" name="blogId" value="<%= blog.blogId %>" />

            <div class="row mb-3">
              <label for="title" class="col-sm-2 col-form-label">Title</label>
              <div class="col-sm-8">
                <input
                  type="text"
                  class="form-control"
                  id="title"
                  name="title"
                  placeholder="Enter title"
                  value="<%= blog.title %>"
                  required
                />
              </div>
            </div>

            <div class="row mb-3">
              <label for="description" class="col-sm-2 col-form-label">Description</label>
              <div class="col-sm-8">
                <textarea
                  id="description"
                  name="description"
                  class="form-control"
                  rows="10"
                  required
                ><%= blog.description %></textarea>
              </div>
            </div>

            <div class="row mb-3">
              <label for="blogimage" class="col-sm-2 col-form-label">Image</label>
              <div class="col-sm-8">
                <input
                  type="text"
                  class="form-control"
                  id="blogimage"
                  name="blogimage"
                  placeholder="Enter image filename"
                  value="<%= blog.blogimage %>"
                />
              </div>
            </div>

            <div class="row mb-3">
              <label for="categoryId" class="col-sm-2 col-form-label">Category</label>
              <div class="col-sm-8">
                <select name="categoryId" id="categoryId" class="form-select" required>
                  <option value="" disabled>Select Category</option>
                  <% categories.forEach(category => { %>
                    <option
                      value="<%= category.categoryId %>"
                      <%= String(category.categoryId) === String(blog.categoryId) ? "selected" : "" %>
                    >
                      <%= category.categoryName %>
                    </option>
                  <% }) %>
                </select>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-sm-8 offset-sm-2">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="mainpage"
                    name="mainpage"
                    <%= blog.mainpage ? "checked" : "" %>
                  />
                  <label class="form-check-label" for="mainpage">Show on main page</label>
                </div>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-sm-8 offset-sm-2">
                <button type="submit" class="btn btn-primary">Edit Blog</button>
                <a href="/admin/blogs" class="btn btn-secondary ms-2">Back</a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
